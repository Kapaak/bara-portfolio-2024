---
import Tag from "@ui/components/Tag.astro";
import { Image } from "astro:assets";
import { urlFor } from "@sanity/utils";
import { tailwindColorToIntent } from "@utils/tailwind";
import type { SanityImage } from "@sanity/types";

interface Props {
  title?: string;
  detailUrl?: string;
  externalUrl?: string;
  tags?: { name: string; value: string }[];
  image?: SanityImage;
  imageAlt?: string;
  tagColor?: string;
  titleColor?: string;
  class?: string;
}

const {
  title,
  tags,
  image,
  detailUrl,
  imageAlt = "",
  tagColor = "background",
  titleColor = "background",
  class: className = "",
} = Astro.props;
---

<a href={detailUrl ? `/projekty/${detailUrl}` : ""} class={className}>
  <article
    class="group relative flex h-[33.3rem] gap-6 text-clip rounded-small bg-[#D9D9D9] md:h-[42rem]"
  >
    {
      image && (
        <Image
          src={urlFor(image)?.url()}
          alt={imageAlt}
          width={image?.asset?.metadata?.dimensions?.width}
          height={image?.asset?.metadata?.dimensions?.height}
          loading="lazy"
          decoding="async"
          class="absolute  size-full origin-bottom-left rounded-[inherit] object-cover transition-all duration-150 group-hover:scale-105"
        />
      )
    }

    <div
      class="z-10 flex flex-1 flex-col items-end justify-between gap-4 px-5 py-3 text-right"
    >
      {
        tags && (
          <div class="flex gap-5">
            {tags.map((tag) => (
              <Tag intent={tailwindColorToIntent(tagColor)}>{tag.name}</Tag>
            ))}
          </div>
        )
      }

      <h3 class={`text- max-w-[60%] text-body1 font-semibold${titleColor}`}>
        {title}
      </h3>

      <!-- {
  externalUrl && (
    <LinkIcon iconSrc={linkSVG} href={externalUrl}>
      {" "}
      Podívat se na stránku{" "}
    </LinkIcon>
  )
} -->
    </div>
  </article>
</a>
