---
import PortableText from '@components/PortableText/PortableText.astro';
import type { SanityBlockContentObject, SanityProjectDetail } from '@domains';
import Headline from '@ui/components/Headline.astro';
import Tag from '@ui/components/Tag.astro';

interface Props
  extends Partial<NonNullable<SanityProjectDetail['parentProject']>> {
  projectPoints: Array<SanityBlockContentObject> | null;
}

const { name, tags, description, projectPoints } = Astro.props;
---

<section class="md:max-w-2xl">
  <div class="sticky top-40 flex flex-col gap-3">
    <Headline tag="h1">
      {name}
    </Headline>

    {
      (tags ?? []).length > 0 && (
        <ul class="flex gap-2">
          {tags?.map(tag => (
            <li>
              <Tag intent="primary">{tag?.name}</Tag>
            </li>
          ))}
        </ul>
      )
    }

    <div class="flex flex-col gap-2">
      <PortableText portableText={description} />
    </div>

    <div class="mt-8 flex flex-col gap-6">
      {
        projectPoints?.map(point => (
          <div class="flex flex-col gap-2">
            <Headline size="small">{point?.title}</Headline>
            <PortableText portableText={point?.richText} />
          </div>
        ))
      }
    </div>
  </div>
</section>
