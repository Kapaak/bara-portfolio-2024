---
import Layout from '@layouts/Layout.astro';
import { getProjectDetailBySlug } from '@sanity/api';
import GallerySection from '@sections/project-detail/GallerySection.astro';
import HeroSection from '@sections/project-detail/HeroSection.astro';
import MaxWidth from '@ui/components/MaxWidth.astro';

const { projectSlug } = Astro.params;

const projectDetail = await getProjectDetailBySlug(projectSlug);
---

<Layout title={projectDetail?.parentProject?.name}>
  <main>
    <MaxWidth>
      <acticle
        class="grid gap-7 pb-10 pt-14 md:grid-cols-[1fr,1.5fr] lg:grid-cols-[auto,1fr]"
      >
        <HeroSection
          name={projectDetail?.parentProject?.name}
          tags={projectDetail?.parentProject?.tags}
          description={projectDetail?.parentProject?.description}
          year={projectDetail?.parentProject?.year}
          projectPoints={projectDetail?.sections}
        />

        <GallerySection gallery={projectDetail?.gallery} />
      </acticle>
    </MaxWidth>
  </main>
</Layout>
